{"version":3,"file":"component---src-templates-blog-post-tsx-d21781c48c079fb762ec.js","mappings":"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","sources":["webpack://gatsby-starter-blog/./src/components/related-list.tsx","webpack://gatsby-starter-blog/./src/components/tag-cloud.tsx","webpack://gatsby-starter-blog/./src/style.tsx","webpack://gatsby-starter-blog/./src/templates/blog-post.tsx","webpack://gatsby-starter-blog/./src/utilFunction.ts"],"sourcesContent":["import * as React from \"react\"\r\nimport { Link, useStaticQuery, graphql } from \"gatsby\"\r\n\r\nimport { mergePosts } from \"../utilFunction\"\r\nimport { GatsbyImage } from \"gatsby-plugin-image\"\r\nimport { ContentsListHeader, ContentsOrderedListWrapper } from \"../style\"\r\n\r\ntype RelatedListProps = {\r\n  slug: string\r\n  category: string\r\n  tags: string[]\r\n}\r\nconst RelatedList = ({ slug, category, tags }: RelatedListProps) => {\r\n  const { allMdx, allWpPost, allFile }: {allMdx: AllMdx, allWpPost: AllWpPost, allFile: AllFile} = useStaticQuery(\r\n    graphql`\r\n      query {\r\n        allMdx(\r\n          sort: { frontmatter: { date: DESC } }\r\n        ) {\r\n          nodes {\r\n            excerpt\r\n            fields {\r\n              slug\r\n            }\r\n            frontmatter {\r\n              title\r\n              date(formatString: \"YYYY/MM/DD\")\r\n              description\r\n              featuredImagePath\r\n              category\r\n              tags\r\n            }\r\n          }\r\n        }\r\n        allWpPost(\r\n          sort: { date: DESC }\r\n        ) {\r\n          nodes {\r\n            title\r\n            excerpt\r\n            slug\r\n            date(formatString: \"YYYY/MM/DD\")\r\n            featuredImage{\r\n              node{\r\n                altText\r\n                gatsbyImage(\r\n                  width: 100,\r\n                  height: 100\r\n                  formats: [AUTO, WEBP, AVIF]\r\n                  placeholder: BLURRED\r\n                )\r\n              }\r\n            }\r\n            categories {\r\n              nodes {\r\n                name\r\n              }\r\n            }\r\n            tags {\r\n              nodes {\r\n                name\r\n              }\r\n            }\r\n          }\r\n        }\r\n        allFile(\r\n          filter: {\r\n            sourceInstanceName: { eq: \"images\" }\r\n          }\r\n        ) {\r\n          edges {\r\n            node {\r\n              relativePath\r\n              childImageSharp {\r\n                gatsbyImageData(\r\n                  width: 100,\r\n                  height: 100\r\n                  formats: [AUTO, WEBP, AVIF]\r\n                  placeholder: BLURRED\r\n                )\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    `\r\n  )\r\n\r\n  // 関連度計算。\r\n  const posts = mergePosts(allMdx, allWpPost, allFile).map(post => {\r\n    let point = 0\r\n    if (post.slug !== slug) {\r\n      // カテゴリの一致出力\r\n      if (post.category === category) point++;\r\n      // タグの一致出力。記事のタグの中に一致するものがあればtrueを返す。\r\n      for (const tag of tags) {\r\n        if (post.tags.includes(tag)) point += 2;\r\n      }\r\n    }\r\n    return { post: post, relevance: point }\r\n  })\r\n  .filter(r => r.relevance >= 2)\r\n  .sort((a, b) => a.relevance = b.relevance ? (a.post.date < b.post.date ? 1 : -1) : b.relevance - a.relevance)\r\n  .slice(0, 6).map(r => r.post)\r\n\r\n  if (!posts) return <></>\r\n\r\n  return (\r\n    <>\r\n      <ContentsListHeader>\r\n        <h2>関連記事</h2>\r\n      </ContentsListHeader>\r\n      <ContentsOrderedListWrapper>\r\n        {posts.map((post, index) => {\r\n          return (\r\n            <li key={post.slug}>\r\n              <article>\r\n                <Link to={post.slug}>\r\n                  <h2>\r\n                    <span>{post.title}</span>\r\n                  </h2>\r\n                  <section>\r\n                    <div><small>\r\n                      <time>{post.date}</time>\r\n                    </small></div>\r\n                    <div className=\"thumbnail\">\r\n                      {typeof post.gatsbyImage === \"undefined\" ||\r\n                        <GatsbyImage alt={post.altText} image={post.gatsbyImage} className=\"thumbnail\" />\r\n                      }\r\n                    </div>\r\n                    <p\r\n                      dangerouslySetInnerHTML={{ __html: post.excerpt }}\r\n                    />\r\n                  </section>\r\n                </Link>\r\n              </article>\r\n            </li>\r\n          )\r\n        })}\r\n      </ContentsOrderedListWrapper>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default RelatedList\r\n","import * as React from \"react\"\r\n\r\nimport { Link, useStaticQuery, graphql } from \"gatsby\"\r\nimport { mergePosts } from \"../utilFunction\"\r\nimport styled from \"styled-components\"\r\n\r\nconst TagCloud = () => {\r\n  const { allMdx, allWpPost }: {allMdx: AllMdx, allWpPost: AllWpPost} = useStaticQuery(\r\n    graphql`\r\n      query {\r\n        allMdx {\r\n          nodes {\r\n            frontmatter {\r\n              tags\r\n            }\r\n          }\r\n        }\r\n        allWpPost {\r\n          nodes {\r\n            tags {\r\n              nodes {\r\n                name\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    `\r\n  )\r\n\r\n  const postTags = allMdx.nodes.map(post => post.frontmatter.tags)\r\n  .concat(allWpPost.nodes.map(post => post.tags.nodes.map(t => t.name)));\r\n\r\n  const tagsBase = postTags.reduce((tagCount, post) => {\r\n    post.map(item => {\r\n        if (tagCount.find(i => i.name === item)) {\r\n          tagCount.filter(i => {\r\n            if (i.name === item) i.count++\r\n          })\r\n        } else {\r\n          tagCount = [...tagCount, { name: item, count: 1 }]\r\n        }\r\n      })\r\n    return tagCount\r\n  }, [] as {name: string, count: number}[])\r\n  .filter(t => t.count > 1)\r\n  .sort((a, b) => b.count - a.count)\r\n\r\n  const largeBoundary = tagsBase[Math.ceil(tagsBase.length / 3)].count\r\n  const smallBoundary = tagsBase[Math.floor(tagsBase.length * 2 / 3)].count\r\n  const tagsView = tagsBase.sort(() => Math.random() - 0.5)\r\n\r\n  return (\r\n    <TagCloudList>\r\n      {tagsView.map(tag => {\r\n        let size\r\n        if (tag.count > largeBoundary) {\r\n          size = \"tagLarge\"\r\n        } else if (tag.count <= smallBoundary) {\r\n          size = \"tagSmall\"\r\n        } else {\r\n          size = \"tagMiddle\"\r\n        }\r\n        return (\r\n          <li key={tag.name} className={size}>\r\n            <Link to={`/tag/${tag.name}`}>\r\n              {tag.name}\r\n            </Link>\r\n          </li>\r\n        )\r\n      })}\r\n    </TagCloudList>\r\n  )\r\n}\r\n\r\nexport default TagCloud\r\n\r\nconst TagCloudList = styled.ul`\r\n  list-style: none;\r\n  background: #eee;\r\n\r\n  li {\r\n    display: inline-block;\r\n    padding: 3px 6px;\r\n  }\r\n\r\n  .tagSmall {\r\n    font-size: var(--fontSize-0);\r\n  }\r\n  .tagMiddle {\r\n    font-size: var(--fontSize-2);\r\n  }\r\n  .tagLarge {\r\n    font-size: var(--fontSize-4)\r\n  }\r\n\r\n  a {\r\n    line-height: 1;\r\n    display: block;\r\n    text-decoration: none;\r\n\r\n    &:hover {\r\n      color: var(--orange);\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n`","import styled from \"styled-components\"\r\n\r\nexport const ContentsListHeader = styled.header`\r\n  text-align: center;\r\n\r\n  h1, h2 {\r\n    &:after {\r\n      margin: 0 auto;\r\n      content: '';\r\n      display: block;\r\n      width: 98%;\r\n      height: 3px;\r\n      background: var(--orange);\r\n    }\r\n  }\r\n`\r\n\r\nexport const ContentsOrderedListWrapper = styled.ol`\r\n  column-count: 1;\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0 -15px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  width: var(--maxWidth-full);\r\n\r\n  li {\r\n    padding: 5px;\r\n    margin: var(--spacing-1) ;\r\n    box-sizing: border-box;\r\n    border: 1px solid var(--black);\r\n    border-radius: 5px;\r\n\r\n    a {\r\n      color: var(--black);\r\n      text-decoration: none;\r\n    }\r\n\r\n    h2 {\r\n      font-size: var(--fontSize-2);\r\n    }\r\n  }\r\n  .thumbnail {\r\n    float: left;\r\n  }\r\n\r\n  @media screen and (min-width: 512px) {\r\n    column-count: 2;\r\n\r\n    li {\r\n      padding: 15px;\r\n      width: 48%;\r\n\r\n      h2 {\r\n        font-size: var(--fontSize-3);\r\n      }\r\n\r\n      a {\r\n        &:hover h2 {\r\n          text-decoration: underline;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  @media screen and (min-width: 768px) {\r\n    column-count: 3;\r\n\r\n    li {\r\n      width: 32%;\r\n    }\r\n  }\r\n`","import * as React from \"react\"\r\nimport { Link, graphql } from \"gatsby\"\r\n\r\nimport Layout from \"../components/layout\"\r\nimport Seo from \"../components/seo\"\r\nimport { GatsbyImage, getImage, IGatsbyImageData } from \"gatsby-plugin-image\"\r\nimport styled from \"styled-components\"\r\nimport { mergePost } from \"../utilFunction\"\r\nimport RelatedList from \"../components/related-list\"\r\nimport TagCloud from \"../components/tag-cloud\"\r\n\r\ntype BlogPostTemplateProps = {\r\n  data: {\r\n    allFile: AllFile\r\n    mdx: MdxPost\r\n    mdPrevious: {\r\n      id: string\r\n      fields: {\r\n        slug: string\r\n      }\r\n      frontmatter: {\r\n        title: string\r\n      }\r\n    }\r\n    mdNext: {\r\n      id: string\r\n      fields: {\r\n        slug: string\r\n      }\r\n      frontmatter: {\r\n        title: string\r\n      }\r\n    }\r\n    wpPost: WpPost\r\n    wpPrevious: {\r\n      id: string\r\n      title: string\r\n      slug: string\r\n    }\r\n    wpNext: {\r\n      id: string\r\n      title: string\r\n      slug: string\r\n    }\r\n  }\r\n  location: Location\r\n  children: React.ReactNode\r\n}\r\n\r\nconst BlogPostTemplate = ({\r\n  data: { allFile, mdx, mdPrevious, mdNext, wpPost, wpPrevious, wpNext },\r\n  location, children\r\n}: BlogPostTemplateProps) => {\r\n  const post = {\r\n    id: mdx?.id || wpPost?.id,\r\n    title: mdx?.frontmatter.title || wpPost?.title,\r\n    body: mdx?.body || wpPost?.content,\r\n    excerpt: mdx?.excerpt || wpPost?.excerpt,\r\n    slug: mdx?.fields.slug || \"/\" + wpPost?.slug,\r\n    date: mdx?.frontmatter.date || wpPost?.date,\r\n    description: mdx?.frontmatter.description,\r\n    altText: wpPost?.featuredImage?.node.altText || \"\",\r\n    gatsbyImage: wpPost?.featuredImage?.node.gatsbyImage || getImage(allFile.edges[0]?.node.childImageSharp),\r\n    category: mdx?.frontmatter.category || wpPost?.categories?.nodes[0]?.name,\r\n    tags: mdx?.frontmatter.tags || wpPost?.tags?.nodes.map(t => t.name),\r\n  }\r\n  const previous = {\r\n    id: mdPrevious?.id || wpPrevious?.id,\r\n    title: mdPrevious?.frontmatter.title || wpPrevious?.title,\r\n    slug: mdPrevious?.fields.slug || \"/\" + wpPrevious?.slug,\r\n  }\r\n  const next = {\r\n    id: mdNext?.id || wpNext?.id,\r\n    title: mdNext?.frontmatter.title || wpNext?.title,\r\n    slug: mdNext?.fields.slug || \"/\" + wpNext?.slug,\r\n  }\r\n\r\n  return (\r\n    <Layout location={location}>\r\n      <Article\r\n        className=\"blog-post\"\r\n        itemScope\r\n        itemType=\"http://schema.org/Article\"\r\n      >\r\n        <header>\r\n          <h1 itemProp=\"headline\">{post.title}</h1>\r\n          <p>\r\n            <div className=\"time\">\r\n              <small>\r\n                <time>{post.date}</time>\r\n              </small>\r\n            </div>\r\n          </p>\r\n        </header>\r\n        <div className=\"featuredImage\">\r\n          <GatsbyImage\r\n            image={post.gatsbyImage}\r\n            alt={post.title}\r\n          />\r\n        </div>\r\n        <Dl>\r\n          <dt>カテゴリ</dt>\r\n          <dd><Link to={`/category/${post.category}`}>{post.category}</Link></dd>\r\n        </Dl>\r\n        <Dl>\r\n          <dt>タグ</dt>\r\n          {post.tags.map((tag, index) => {\r\n            return <dd key={`tag${index}`}><Link to={`/tag/${tag}/`}>{tag}</Link></dd>\r\n          })}\r\n        </Dl>\r\n        <TagCloud></TagCloud>\r\n\r\n        <BlogEntry>\r\n          {children ||  // MDX or Wordpress content\r\n            <section\r\n              dangerouslySetInnerHTML={{ __html: post.body }}\r\n              itemProp=\"articleBody\"\r\n            />\r\n          }\r\n        </BlogEntry>\r\n        <hr />\r\n        <footer>\r\n        </footer>\r\n      </Article>\r\n      <BlogPostNav className=\"blog-post-nav\">\r\n        <ul\r\n          style={{\r\n            display: `flex`,\r\n            flexWrap: `wrap`,\r\n            justifyContent: `space-between`,\r\n            listStyle: `none`,\r\n            padding: 0\r\n          }}\r\n        >\r\n          <li>\r\n            {previous && (\r\n              <Link to={previous.slug} rel=\"prev\">\r\n                ← {previous.title}\r\n              </Link>\r\n            )}\r\n          </li>\r\n          <li>\r\n            {next && (\r\n              <Link to={next.slug} rel=\"next\">\r\n                {next.title} →\r\n              </Link>\r\n            )}\r\n          </li>\r\n        </ul>\r\n      </BlogPostNav>\r\n\r\n      <RelatedList slug={post.slug} category={post.category} tags={post.tags} />\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default BlogPostTemplate\r\n\r\nexport const pageQuery = graphql`\r\n  query BlogPostBySlug(\r\n    $id: String!\r\n    $previousPostId: String\r\n    $nextPostId: String\r\n    $imagePath: String\r\n  ) {\r\n    allFile(\r\n      filter: {\r\n        relativePath: { eq: $imagePath }\r\n        sourceInstanceName: { eq: \"images\" }\r\n      }\r\n    ) {\r\n      edges {\r\n        node {\r\n          childImageSharp {\r\n            gatsbyImageData(\r\n              width: 960\r\n              formats: [AUTO, WEBP, AVIF]\r\n              placeholder: BLURRED\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    mdx(id: { eq: $id }) {\r\n      id\r\n      excerpt\r\n      body\r\n      fields {\r\n        slug\r\n      }\r\n      frontmatter {\r\n        title\r\n        date(formatString: \"YYYY/MM/DD\")\r\n        description\r\n        category\r\n        tags\r\n      }\r\n      \r\n    }\r\n    mdPrevious: mdx(id: { eq: $previousPostId }) {\r\n      fields {\r\n        slug\r\n      }\r\n      frontmatter {\r\n        title\r\n      }\r\n    }\r\n    mdNext: mdx(id: { eq: $nextPostId }) {\r\n      fields {\r\n        slug\r\n      }\r\n      frontmatter {\r\n        title\r\n      }\r\n    }\r\n    wpPost(id: { eq: $id }) {\r\n      id\r\n      title\r\n      content\r\n      excerpt\r\n      slug\r\n      date(formatString: \"YYYY/MM/DD\")\r\n      featuredImage{\r\n        node{\r\n          altText\r\n          gatsbyImage(width: 960)\r\n        }\r\n      }\r\n      categories{\r\n        nodes{\r\n          name\r\n        }\r\n      }\r\n      tags{\r\n        nodes{\r\n          name\r\n        }\r\n      }\r\n    }\r\n    wpPrevious: wpPost(id: { eq: $previousPostId }) {\r\n      title\r\n      slug\r\n    }\r\n    wpNext: wpPost(id: { eq: $nextPostId }) {\r\n      title\r\n      slug\r\n    }\r\n  }\r\n`\r\n\r\nexport const Head = ({\r\n                       data: { allFile, mdx, wpPost },\r\n                       location\r\n                     }: BlogPostTemplateProps) => {\r\n  const post = mergePost(mdx, wpPost, allFile)\r\n  return (\r\n    <Seo\r\n      title={post.title}\r\n      description={post.excerpt}\r\n      location={location}\r\n      imagePath={post.gatsbyImage ? post.gatsbyImage.images.fallback?.src : null}\r\n      post={post}\r\n    />\r\n  )\r\n}\r\n\r\nconst Article = styled.article`\r\n  max-width: 960px;\r\n  margin: 0 auto;\r\n\r\n  .time {\r\n    text-align: right;\r\n  }\r\n\r\n  .featuredImage {\r\n    text-align: center;\r\n  }\r\n`\r\nconst BlogEntry = styled.div`\r\n  margin: 15px 0 30px;\r\n  border-top: 1px solid #ccc;\r\n  border-bottom: 1px solid #ccc;\r\n`\r\nconst BlogPostNav = styled.nav`\r\n  max-width: 750px;\r\n  margin: 0 auto;\r\n\r\n  ul {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    list-style: none;\r\n  }\r\n`\r\nconst Dl = styled.dl`\r\n  display: flex;\r\n  margin: 0;\r\n\r\n  dt {\r\n    width: 80px;\r\n    font-weight: 700;\r\n  }\r\n\r\n  dd {\r\n    font-size: 14px;\r\n    margin-left: 0;\r\n    padding-left: 0;\r\n\r\n    & + dd {\r\n      margin-left: 15px;\r\n      margin-bottom: 5px;\r\n    }\r\n\r\n    a {\r\n      text-decoration: none;\r\n      border-radius: 3px;\r\n      color: #fff;\r\n      background: var(--orange);\r\n      padding: 2px 5px;\r\n\r\n      &:hover {\r\n        opacity: .5;\r\n      }\r\n    }\r\n  }\r\n`\r\n","import { getImage, IGatsbyImageData } from \"gatsby-plugin-image\"\r\n\r\nexport function mergePosts(allMdx: AllMdx, allWpPost: AllWpPost, allFile?: AllFile) {\r\n  let allFeaturedImages: { [key: string]: IGatsbyImageData } = {}\r\n  allFile && allFile.edges.forEach(node => {\r\n    allFeaturedImages[node.node.relativePath] = node.node.childImageSharp.gatsbyImageData\r\n  })\r\n  const mdxPosts = allMdx.nodes\r\n  const wpPosts = allWpPost.nodes\r\n  return mdxPosts.map(post => {\r\n    const mdx: CommonPost = {\r\n      title: post.frontmatter.title,\r\n      excerpt: post.excerpt,\r\n      slug: post.fields.slug,\r\n      date: post.frontmatter.date,\r\n      description: post.frontmatter.description,\r\n      altText: post.frontmatter.featuredImagePath,\r\n      gatsbyImage: getImage(allFeaturedImages[post.frontmatter.featuredImagePath || \"featured/defaultThumbnail.png\"]),\r\n      category: post.frontmatter.category || \"\",\r\n      tags: post.frontmatter.tags || []\r\n    }\r\n    return mdx\r\n  }).concat(wpPosts.map(post => {\r\n    return {\r\n      title: post.title,\r\n      excerpt: post.excerpt,\r\n      slug: \"/\" + post.slug,\r\n      date: post.date,\r\n      altText: post.featuredImage?.node.altText || \"\",\r\n      gatsbyImage: post.featuredImage?.node.gatsbyImage || getImage(allFeaturedImages[\"featured/defaultThumbnail.png\"]),\r\n      category: post.categories?.nodes[0]?.name || \"\",\r\n      tags: post.tags?.nodes.map(t => t.name) || []\r\n    }\r\n  })).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()) as CommonPost[]\r\n}\r\n\r\nexport function mergePost(mdx?: MdxPost, wpPost?: WpPost, allFile?: AllFile) {\r\n  let allFeaturedImages: { [key: string]: IGatsbyImageData } = {}\r\n  allFile && allFile.edges.forEach(node => {\r\n    allFeaturedImages[node.node.relativePath] = node.node.childImageSharp.gatsbyImageData\r\n  })\r\n  return {\r\n    title: mdx?.frontmatter.title || wpPost?.title,\r\n    excerpt: mdx?.excerpt || wpPost?.excerpt,\r\n    slug: mdx?.fields.slug || \"/\" + wpPost?.slug,\r\n    date: mdx?.frontmatter.date || wpPost?.date,\r\n    description: mdx?.frontmatter.description || \"\",\r\n    altText: mdx?.frontmatter.featuredImagePath || wpPost?.featuredImage?.node.altText || \"\",\r\n    gatsbyImage: getImage(allFeaturedImages[mdx?.frontmatter.featuredImagePath || \"featured/defaultThumbnail.webp\"])\r\n      || wpPost?.featuredImage?.node.gatsbyImage\r\n      || getImage(allFeaturedImages[\"featured/defaultThumbnail.webp\"])\r\n  } as CommonPost\r\n}\r\n"],"names":["_ref","slug","category","tags","allMdx","allWpPost","allFile","useStaticQuery","posts","mergePosts","map","post","point","tag","includes","relevance","filter","r","sort","a","b","date","slice","React","ContentsListHeader","ContentsOrderedListWrapper","index","key","Link","to","title","className","gatsbyImage","GatsbyImage","alt","altText","image","dangerouslySetInnerHTML","__html","excerpt","TagCloud","tagsBase","nodes","frontmatter","concat","t","name","reduce","tagCount","item","find","i","count","_toConsumableArray","largeBoundary","Math","ceil","length","smallBoundary","floor","tagsView","random","TagCloudList","size","styled","ul","_templateObject","_taggedTemplateLiteralLoose","header","ol","_templateObject2","_wpPost$featuredImage","_wpPost$featuredImage2","_allFile$edges$","_wpPost$categories","_wpPost$categories$no","_wpPost$tags","data","mdx","mdPrevious","mdNext","wpPost","wpPrevious","wpNext","location","children","id","body","content","fields","description","featuredImage","node","getImage","edges","childImageSharp","categories","previous","next","Layout","Article","itemScope","itemType","itemProp","Dl","BlogEntry","BlogPostNav","style","display","flexWrap","justifyContent","listStyle","padding","rel","RelatedList","Head","_ref2","_post$gatsbyImage$ima","mergePost","Seo","imagePath","images","fallback","src","article","div","nav","_templateObject3","dl","_templateObject4","allFeaturedImages","forEach","relativePath","gatsbyImageData","mdxPosts","wpPosts","featuredImagePath","_post$featuredImage","_post$featuredImage2","_post$categories","_post$categories$node","_post$tags","Date","getTime"],"sourceRoot":""}
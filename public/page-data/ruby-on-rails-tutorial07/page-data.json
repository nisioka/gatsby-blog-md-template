{"componentChunkName":"component---src-templates-blog-post-js","path":"/ruby-on-rails-tutorial07/","result":{"data":{"site":{"siteMetadata":{"title":"分かりやすい技術ブログ"}},"allFile":{"edges":[]},"mdx":null,"mdPrevious":null,"mdNext":null,"wpPost":{"id":"cG9zdDoxNDgy","title":"Ruby on Rails チュートリアルをやってみた【第7章】","content":"\n<h2 class=\"wp-block-heading\">第7章の実績</h2>\n\n\n\n<p><a rel=\"noreferrer noopener\" aria-label=\"第7章 ユーザー登録 (opens in a new tab)\" href=\"https://railstutorial.jp/chapters/sign_up?version=5.1#cha-sign_up\" target=\"_blank\">第7章 ユーザー登録</a> を実施しました！<br>実施時間: 4時間</p>\n\n\n\n<h3 class=\"wp-block-heading\">学べたこと</h3>\n\n\n\n<ul><li>デバッグ情報の埋め込み<ul><li>ビルトインの&#8221;debug&#8221;メソッド<br>例えば&lt;%= debug(params) if Rails.env.development? %&gt;をerbに記載すれば、&#8221;params&#8221;の情報を&#8221;開発環境でのみ&#8221;表示することができます。</li><li> byebug gemによる&#8221;debugger&#8221;メソッド<br>Gemfileに&#8221;byebug&#8221;の依存関係の指定があれば、debuggerメソッドが使えるようになり、サーバー起動中に中断するブレイクポイントとなります。 Railsアプリケーションの中でよく分からない挙動があったら、トラブルが起こっていそうなコードの近くに差し込むのがコツです。</li></ul></li><li>RESTfulなルーティング指定<br>「resources :users」とroutes.rbに記載するだけで、以下のuserに対する、取得/新規作成/更新/削除といったRESTfulなルーティング指定を全てしてくれます。</li></ul>\n\n\n\n<table class=\"wp-block-table\"><tbody><tr><td>HTTPリクエスト</td><td>URL</td><td>アクション</td><td>名前付きルート</td><td>用途</td></tr><tr><td><code>GET</code></td><td>/users</td><td><code>index</code></td><td><code>users_path</code></td><td>すべてのユーザーを一覧するページ</td></tr><tr><td><code>GET</code></td><td>/users/1</td><td><code>show</code></td><td><code>user_path(user)</code></td><td>特定のユーザーを表示するページ</td></tr><tr><td><code>GET</code></td><td>/users/new</td><td><code>new</code></td><td><code>new_user_path</code></td><td>ユーザーを新規作成するページ (ユーザー登録)</td></tr><tr><td><code>POST</code></td><td>/users</td><td><code>create</code></td><td><code>users_path</code></td><td>ユーザーを作成するアクション</td></tr><tr><td><code>GET</code></td><td>/users/1/edit</td><td><code>edit</code></td><td><code>edit_user_path(user)</code></td><td>id=<code>1</code>のユーザーを編集するページ</td></tr><tr><td><code>PATCH</code></td><td>/users/1</td><td><code>update</code></td><td><code>user_path(user)</code></td><td>ユーザーを更新するアクション</td></tr><tr><td><code>DELETE</code></td><td>/users/1</td><td><code>destroy</code></td><td><code>user_path(user)</code></td><td>ユーザーを削除するアクション</td></tr></tbody></table>\n\n\n\n<ul><li>form_forヘルパーメソッド<br> &lt;%= form_for(@user, url: signup_path) do |f| %&gt;とerbに記載すると、Active Recordのオブジェクト（ここでは@user）を取り込み、そのオブジェクトの属性を使ってフォームを構築します。</li><li> Strong Parameters<br>以下のように定義することで、paramsに、&#8221;:user&#8221;を必須とし、&#8221;:name&#8221;、&#8221;:email&#8221;、&#8221;:password&#8221;、&#8221;password_confirmation&#8221;のみ入力を許可するという制約を設けることができます。<br>以前のバージョンのRailsでは、モデル層で<em>attr_accessible</em>メソッドを使うことでマスアサインメント脆弱性を防止していましたが、Rails 4.0以降ではコントローラ層でこのStrong Parametersというテクニックを使うことが推奨されているそうです。また、 これらのパラメータを使いやすくするために、<code>user_params</code>という外部メソッドを使うのが慣習になっています。 </li></ul>\n\n\n\n<pre class=\"wp-block-code\"><code>private\n\n  def user_params\n    params.require(:user).permit(:name, :email, :password, :password_confirmation)\n  end</code></pre>\n\n\n\n<ul><li>redirect_to @user = redirect_to user_url(@user)</li></ul>\n\n\n\n<h3 class=\"wp-block-heading\">独自にやったこと</h3>\n\n\n\n<h4 class=\"wp-block-heading\">デプロイ時にdb:migrateが自動で流れるよう設定</h4>\n\n\n\n<p>本番環境へのデプロイ時、毎度手動でdb:migrateを流すのが面倒だったので、HerokuのRelease Phaseという機能を用いて、「rails db:migrate 」を自動で流れるように設定しました。下記のようにProcfileに「release:」から始まる一行を追加するだけです。</p>\n\n\n\n<script src=\"https://gist-it.appspot.com/github/nisioka/RubyOnRailsTutorial/blob/sign-up/Procfile\"></script>\n\n\n\n<h2 class=\"wp-block-heading\">参考</h2>\n\n\n\n<h3 class=\"wp-block-heading\">環境</h3>\n\n\n\n<ul><li>ruby: 2.3.3</li><li>ruby on rails: 5.1.4</li><li>OS: Windows 10 (64bit)</li><li>IDE: IntelliJ ULTIMATE 2018.1</li><li>リポジトリ：GitHub</li></ul>\n\n\n\n<figure class=\"wp-block-embed\"><div class=\"wp-block-embed__wrapper\">\nhttps://github.com/nisioka/RubyOnRailsTutorial/tree/static-pages\n</div></figure>\n\n\n\n<h3 class=\"wp-block-heading\">リンク</h3>\n\n\n\n<ul><li><a href=\"https://railstutorial.jp/chapters/sign_up?version=5.1#cha-sign_up\" target=\"_blank\" rel=\"noreferrer noopener\" aria-label=\"第7章 ユーザー登録 (opens in a new tab)\">第7章 ユーザー登録</a></li></ul>\n\n\n\n<p>【スポンサードリンク】</p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"//af.moshimo.com/af/c/click?a_id=1184149&amp;p_id=1024&amp;pc_id=1450&amp;pl_id=15158&amp;guid=ON\" target=\"_blank\" rel=\"noreferrer noopener\"><img decoding=\"async\" src=\"//image.moshimo.com/af-img/0330/000000015158.jpg\" alt=\"\"/></a></figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"//af.moshimo.com/af/c/click?a_id=1124058&amp;p_id=936&amp;pc_id=1196&amp;pl_id=21425&amp;guid=ON\" target=\"_blank\" rel=\"noreferrer noopener\"><img decoding=\"async\" src=\"//image.moshimo.com/af-img/0288/000000021425.jpg\" alt=\"\"/></a></figure>\n","excerpt":"<p>第7章の実績 第7章 ユーザー登録 を実施しました！実施時間: 4時間 学べたこと デバッグ情報の埋め込み ビルトインの&#8221;debug&#8221;メソッド例えば&lt;%= debug(params) if  [&hellip;]</p>\n","slug":"ruby-on-rails-tutorial07","date":"2019/03/09","featuredImage":{"node":{"altText":"","gatsbyImage":{"images":{"sources":[{"srcSet":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/46fba62b6562ba0bd521ccbb93ae069d/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 240w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/a9da388c6e12d233ba7aa2e5a298751f/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D480%26h%3D181%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 480w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/5a206004216c900bd35c696a2bdb08fd/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D960%26h%3D362%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 960w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/a84367d043cba502074a7fe5f197e972/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D1920%26h%3D724%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 1920w","type":"image/avif","sizes":"(min-width: 960px) 960px, 100vw"},{"srcSet":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/81bf8661cf4bdc30787fb97c3836412c/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 240w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/96824bb0e919780586b0c6d5071f28cf/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D480%26h%3D181%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 480w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/bd2a4d6df4236354cb7c1d30e0036935/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D960%26h%3D362%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 960w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/150cc819a29c76993cc3c0697b2d07b9/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D1920%26h%3D724%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 1920w","type":"image/webp","sizes":"(min-width: 960px) 960px, 100vw"}],"fallback":{"src":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/9c02974f0f35727dff574cbc2f69e599/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68","srcSet":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/9c02974f0f35727dff574cbc2f69e599/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 240w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/1003265cd3927cf00b230acd3a619d57/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D480%26h%3D181%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 480w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/3557dce6001502f87d687ac5f889312f/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D960%26h%3D362%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 960w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/059a4c3761b1c9b19eb1a22a998c179b/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D1920%26h%3D724%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 1920w","sizes":"(min-width: 960px) 960px, 100vw"}},"layout":"constrained","width":960,"height":362,"backgroundColor":"rgb(8,8,8)"}}}},"wpPrevious":{"title":"Ruby on Rails チュートリアルをやってみた【第8章】","slug":"ruby-on-rails-tutorial08"},"wpNext":{"title":"Ruby on Rails チュートリアルをやってみた【第6章】","slug":"ruby-on-rails-tutorial06"}},"pageContext":{"id":"cG9zdDoxNDgy","previousPostId":"cG9zdDoxNzc2","nextPostId":"cG9zdDoxMTcx","imagePath":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}
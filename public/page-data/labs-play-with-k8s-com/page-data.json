{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/labs-play-with-k8s-com/","result":{"data":{"allFile":{"edges":[]},"mdx":null,"mdPrevious":null,"mdNext":null,"wpPost":{"id":"cG9zdDoyMjcw","title":"ブラウザで簡単にkubernatesで遊ぼう（labs.play-with-k8s.com）","content":"\n<p>kubernatis(以降k8sと表記)を試しに使ってみたい、触って慣れたとなった時に、普通ならローカル環境に構築してあれやこれやとやるのですが、それだと環境がグチャグチャになってわけが分からない状態になったりします。(よく理解していないで試行錯誤していると特に。)</p>\n\n\n\n<p>そんな時に、play-with-k8sというサイトを使うと<strong>ブラウザだけでk8sを構築して使うことができます</strong>。文字通りk8sで遊べます。ここでは基本的な使い方、遊び方を紹介します。</p>\n\n\n\n<h3 class=\"wp-block-heading\">サイトログイン</h3>\n\n\n\n<p>まず、<a href=\"https://labs.play-with-k8s.com\" target=\"_blank\" rel=\"noreferrer noopener\" aria-label=\"https://labs.play-with-k8s.com (opens in a new tab)\">https://labs.play-with-k8s.com</a>にアクセスします。</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-2317 inline-gatsby-image-wrapper\"><div style=\"max-width:1018px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;1024&#x27;%20width=&#x27;1018&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1018px) 1018px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/b17616990994c1108c3ec4513dd74627/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D255%26h%3D257%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00\" data-srcset=\"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/b17616990994c1108c3ec4513dd74627/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D255%26h%3D257%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00 255w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/43e0c4b4c170e95f3b972f2ad5cd5280/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D509%26h%3D512%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00 509w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/1c9e8eb5724faed3a4d9cb9e8589d63c/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D1018%26h%3D1024%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00 1018w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1018px) 1018px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/b17616990994c1108c3ec4513dd74627/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D255%26h%3D257%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00\" srcSet=\"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/b17616990994c1108c3ec4513dd74627/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D255%26h%3D257%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00 255w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/43e0c4b4c170e95f3b972f2ad5cd5280/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D509%26h%3D512%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00 509w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/1c9e8eb5724faed3a4d9cb9e8589d63c/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&amp;a=w%3D1018%26h%3D1024%26fm%3Dpng%26q%3D90&amp;cd=2019-12-04T08%3A27%3A00 1018w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"1\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/b17616990994c1108c3ec4513dd74627/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D255%26h%3D257%26fm%3Dpng%26q%3D90&cd=2019-12-04T08%3A27%3A00\",\"srcSet\":\"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/b17616990994c1108c3ec4513dd74627/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D255%26h%3D257%26fm%3Dpng%26q%3D90&cd=2019-12-04T08%3A27%3A00 255w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/43e0c4b4c170e95f3b972f2ad5cd5280/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D509%26h%3D512%26fm%3Dpng%26q%3D90&cd=2019-12-04T08%3A27%3A00 509w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/1c9e8eb5724faed3a4d9cb9e8589d63c/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D1018%26h%3D1024%26fm%3Dpng%26q%3D90&cd=2019-12-04T08%3A27%3A00 1018w\",\"sizes\":\"(min-width: 1018px) 1018px, 100vw\"}},\"layout\":\"constrained\",\"width\":1018,\"height\":1024},\"alt\":\"\",\"className\":\"wp-image-2317 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"1\"}</script><figcaption>トップ画面</figcaption></figure>\n\n\n\n<p>そこでLoginボタンを押すとアカウント選択画面になりますので、Github認証かDocker認証でログインしてください。もしこれらのアカウントが無いのであれば別途作成する必要があります。（各サイトで作成してください。無料です。）</p>\n\n\n\n<h4 class=\"wp-block-heading\">nodeを作成する</h4>\n\n\n\n<p>k8sのnodeを作成します。k8sは複数node使ってこそなのですが、今回は簡単のため、主と従の最小二つ構成で説明しようと思います。</p>\n\n\n\n<p>作成方法は至って簡単で、左上のボタンをクリックするだけです。数秒で出来ますので、二つ作成しましょう。</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-2320 inline-gatsby-image-wrapper\"><div style=\"max-width:465px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;299&#x27;%20width=&#x27;465&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"2\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 465px) 465px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/e4159d601535eabf291c9c50e1d0f442/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D116%26h%3D75%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08\" data-srcset=\"/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/e4159d601535eabf291c9c50e1d0f442/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D116%26h%3D75%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08 116w,/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/aeabd50e343157c24525d2a8978dfeed/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D233%26h%3D150%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08 233w,/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/947b188841be6321cf6ed3f7259dd677/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D465%26h%3D299%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08 465w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"2\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 465px) 465px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/e4159d601535eabf291c9c50e1d0f442/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D116%26h%3D75%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08\" srcSet=\"/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/e4159d601535eabf291c9c50e1d0f442/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D116%26h%3D75%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08 116w,/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/aeabd50e343157c24525d2a8978dfeed/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D233%26h%3D150%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08 233w,/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/947b188841be6321cf6ed3f7259dd677/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&amp;a=w%3D465%26h%3D299%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A39%3A08 465w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"2\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/e4159d601535eabf291c9c50e1d0f442/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&a=w%3D116%26h%3D75%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A39%3A08\",\"srcSet\":\"/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/e4159d601535eabf291c9c50e1d0f442/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&a=w%3D116%26h%3D75%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A39%3A08 116w,/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/aeabd50e343157c24525d2a8978dfeed/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&a=w%3D233%26h%3D150%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A39%3A08 233w,/_gatsby/image/0c7f1e0064ef9609d2e94af92e133968/947b188841be6321cf6ed3f7259dd677/image-1.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-1.png&a=w%3D465%26h%3D299%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A39%3A08 465w\",\"sizes\":\"(min-width: 465px) 465px, 100vw\"}},\"layout\":\"constrained\",\"width\":465,\"height\":299},\"alt\":\"\",\"className\":\"wp-image-2320 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"2\"}</script><figcaption>インスタンス作成ボタン</figcaption></figure>\n\n\n\n<h4 class=\"wp-block-heading\">masterセットアップ①（必須）</h4>\n\n\n\n<p>主となるノードをひとつ選び、masterとして初期セットアップします。右側の黒いコンソール画面に、以下のコマンドを入力してEnterします。</p>\n\n\n\n<pre class=\"wp-block-preformatted\">kubeadm init --apiserver-advertise-address $(hostname -i)</pre>\n\n\n\n<p>しばらく待つ（数分）と処理が完了し、以下のような画面になります。これでk8sのmasterがまず準備されました。この時、コンソールの下のほうの、「kubeadm join」から始まる部分を探してください。そしてその行をコピーしてください（画面幅によって、&#8221;\\&#8221;で改行されている場合がありますので場合によっては複数行になるかもしれません）。</p>\n\n\n\n<figure class=\"wp-block-image\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-2272 inline-gatsby-image-wrapper\"><div style=\"max-width:1024px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;517&#x27;%20width=&#x27;1024&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"3\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/09aa1e0cb8259cf06814bf7641d06fed/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D256%26h%3D129%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40\" data-srcset=\"/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/09aa1e0cb8259cf06814bf7641d06fed/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D256%26h%3D129%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 256w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/a1b2a619136166a3aa260bfb211a1bd7/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D512%26h%3D259%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 512w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/4066fdd65ac7da3d09190f30b979e0df/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D1024%26h%3D517%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 1024w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/ad52188391883d826531429f34b1b7d0/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D2048%26h%3D1034%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 2048w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"3\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/09aa1e0cb8259cf06814bf7641d06fed/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D256%26h%3D129%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40\" srcSet=\"/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/09aa1e0cb8259cf06814bf7641d06fed/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D256%26h%3D129%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 256w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/a1b2a619136166a3aa260bfb211a1bd7/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D512%26h%3D259%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 512w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/4066fdd65ac7da3d09190f30b979e0df/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D1024%26h%3D517%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 1024w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/ad52188391883d826531429f34b1b7d0/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&amp;a=w%3D2048%26h%3D1034%26fm%3Dpng%26q%3D90&amp;cd=2019-11-07T05%3A02%3A40 2048w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"3\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/09aa1e0cb8259cf06814bf7641d06fed/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&a=w%3D256%26h%3D129%26fm%3Dpng%26q%3D90&cd=2019-11-07T05%3A02%3A40\",\"srcSet\":\"/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/09aa1e0cb8259cf06814bf7641d06fed/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&a=w%3D256%26h%3D129%26fm%3Dpng%26q%3D90&cd=2019-11-07T05%3A02%3A40 256w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/a1b2a619136166a3aa260bfb211a1bd7/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&a=w%3D512%26h%3D259%26fm%3Dpng%26q%3D90&cd=2019-11-07T05%3A02%3A40 512w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/4066fdd65ac7da3d09190f30b979e0df/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&a=w%3D1024%26h%3D517%26fm%3Dpng%26q%3D90&cd=2019-11-07T05%3A02%3A40 1024w,/_gatsby/image/396e083042dc7b2154f1bedfdab8bd6c/ad52188391883d826531429f34b1b7d0/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F11%2Fimage.png&a=w%3D2048%26h%3D1034%26fm%3Dpng%26q%3D90&cd=2019-11-07T05%3A02%3A40 2048w\",\"sizes\":\"(min-width: 1024px) 1024px, 100vw\"}},\"layout\":\"constrained\",\"width\":1024,\"height\":517},\"alt\":\"\",\"className\":\"wp-image-2272 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"3\"}</script></figure>\n\n\n\n<h4 class=\"wp-block-heading\">slaveセットアップ① （必須） </h4>\n\n\n\n<p>上でコピーしたものを使って、masterのk8sに紐づく形で&#8221;従&#8221;のk8sのnodeをセットアップします。</p>\n\n\n\n<p>まず左側でmasterとしたのとは別のnodeを選択します。そしてそこのコンソールに上でコピーした「 kubeadm join ～」を貼り付けてEnterします。</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-2322 inline-gatsby-image-wrapper\"><div style=\"max-width:1024px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;341&#x27;%20width=&#x27;1024&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"4\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/c9878bb56e5046a233d3981946caec59/a55d1cdf87353cfaaa947f2c54609528/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D256%26h%3D85%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47\" data-srcset=\"/_gatsby/image/c9878bb56e5046a233d3981946caec59/a55d1cdf87353cfaaa947f2c54609528/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D256%26h%3D85%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47 256w,/_gatsby/image/c9878bb56e5046a233d3981946caec59/3697e221dee0eb76c57c9c4e203653c6/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D512%26h%3D171%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47 512w,/_gatsby/image/c9878bb56e5046a233d3981946caec59/10803632ca30c75a75155018071a95fe/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D1024%26h%3D341%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47 1024w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"4\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/c9878bb56e5046a233d3981946caec59/a55d1cdf87353cfaaa947f2c54609528/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D256%26h%3D85%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47\" srcSet=\"/_gatsby/image/c9878bb56e5046a233d3981946caec59/a55d1cdf87353cfaaa947f2c54609528/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D256%26h%3D85%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47 256w,/_gatsby/image/c9878bb56e5046a233d3981946caec59/3697e221dee0eb76c57c9c4e203653c6/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D512%26h%3D171%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47 512w,/_gatsby/image/c9878bb56e5046a233d3981946caec59/10803632ca30c75a75155018071a95fe/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&amp;a=w%3D1024%26h%3D341%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A54%3A47 1024w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"4\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/c9878bb56e5046a233d3981946caec59/a55d1cdf87353cfaaa947f2c54609528/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&a=w%3D256%26h%3D85%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A54%3A47\",\"srcSet\":\"/_gatsby/image/c9878bb56e5046a233d3981946caec59/a55d1cdf87353cfaaa947f2c54609528/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&a=w%3D256%26h%3D85%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A54%3A47 256w,/_gatsby/image/c9878bb56e5046a233d3981946caec59/3697e221dee0eb76c57c9c4e203653c6/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&a=w%3D512%26h%3D171%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A54%3A47 512w,/_gatsby/image/c9878bb56e5046a233d3981946caec59/10803632ca30c75a75155018071a95fe/image-2.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-2.png&a=w%3D1024%26h%3D341%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A54%3A47 1024w\",\"sizes\":\"(min-width: 1024px) 1024px, 100vw\"}},\"layout\":\"constrained\",\"width\":1024,\"height\":341},\"alt\":\"\",\"className\":\"wp-image-2322 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"4\"}</script><figcaption> kubeadm join 実行後</figcaption></figure>\n\n\n\n<p>これで&#8221;従&#8221;のnodeのセットアップは完了です。試しに、masterのnodeに戻って以下のコマンドを打ってください。すると、k8sが認識している二つのnodeが表示されるはずです。</p>\n\n\n\n<pre class=\"wp-block-preformatted\">kebectl get nodes</pre>\n\n\n\n<figure class=\"wp-block-image size-large\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-2323 inline-gatsby-image-wrapper\"><div style=\"max-width:421px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;73&#x27;%20width=&#x27;421&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"5\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 421px) 421px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/86c84af19a818b5052677729d499aaeb/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D105%26h%3D18%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27\" data-srcset=\"/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/86c84af19a818b5052677729d499aaeb/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D105%26h%3D18%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27 105w,/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/378746f406e700a6e741e8b620d41f09/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D211%26h%3D37%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27 211w,/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/fe93bac2f2e3e4a835868fd5e428837f/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D421%26h%3D73%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27 421w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"5\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 421px) 421px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/86c84af19a818b5052677729d499aaeb/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D105%26h%3D18%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27\" srcSet=\"/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/86c84af19a818b5052677729d499aaeb/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D105%26h%3D18%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27 105w,/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/378746f406e700a6e741e8b620d41f09/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D211%26h%3D37%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27 211w,/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/fe93bac2f2e3e4a835868fd5e428837f/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&amp;a=w%3D421%26h%3D73%26fm%3Dpng%26q%3D90&amp;cd=2019-12-05T05%3A58%3A27 421w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"5\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/86c84af19a818b5052677729d499aaeb/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&a=w%3D105%26h%3D18%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A58%3A27\",\"srcSet\":\"/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/86c84af19a818b5052677729d499aaeb/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&a=w%3D105%26h%3D18%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A58%3A27 105w,/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/378746f406e700a6e741e8b620d41f09/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&a=w%3D211%26h%3D37%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A58%3A27 211w,/_gatsby/image/40cdde06904a34e73cfdf3a6fe0f32b1/fe93bac2f2e3e4a835868fd5e428837f/image-3.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-3.png&a=w%3D421%26h%3D73%26fm%3Dpng%26q%3D90&cd=2019-12-05T05%3A58%3A27 421w\",\"sizes\":\"(min-width: 421px) 421px, 100vw\"}},\"layout\":\"constrained\",\"width\":421,\"height\":73},\"alt\":\"\",\"className\":\"wp-image-2323 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"5\"}</script><figcaption>masterで見ると、二つのnodeが管理されているのが分かる</figcaption></figure>\n\n\n\n<p>もし、二つより多くのnodeで試したい場合は本節の「 kubeadm join ～」を各nodeで繰り返し実行してください。</p>\n\n\n\n<h4 class=\"wp-block-heading\">masterセットアップ② （必須） </h4>\n\n\n\n<p>次にk8sのネットワーク設定を行います。k8sでは設定ファイルで設定を適用できますので、ここでは公開されている設定ファイルを用いて、設定を適用しています。</p>\n\n\n\n<p>masterとしたnodeで、下記コマンドを貼り付けて実行してください。</p>\n\n\n\n<pre class=\"wp-block-preformatted\">kubectl apply -n kube-system -f \"https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 |tr -d '\\n')\"</pre>\n\n\n\n<h4 class=\"wp-block-heading\">masterセットアップ③ （任意） </h4>\n\n\n\n<p>現在は何もないただの環境なので、アプリケーションを入れて動作するのを見てみようと思います。ここではnginxというwebサーバを設定します。</p>\n\n\n\n<p>これも設定ファイルのサンプルが公開されているので、それを適用しています。masterとしたnodeで、下記コマンドを貼り付けて実行してください。</p>\n\n\n\n<pre class=\"wp-block-preformatted\">kubectl apply -f https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/application/nginx-app.yaml</pre>\n\n\n\n<p>確認として、以下のコマンドを実行して「my-nginx-svc」が表示されていれば成功です。</p>\n\n\n\n<pre class=\"wp-block-preformatted\">kubectl get service</pre>\n\n\n\n<h4 class=\"wp-block-heading\">masterセットアップ④（任意）</h4>\n\n\n\n<figure class=\"wp-block-image size-large\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-2331 inline-gatsby-image-wrapper\"><div style=\"max-width:1024px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;525&#x27;%20width=&#x27;1024&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"6\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/07e483be156973f584758d8a3daa9cc8/a3c6e3e88f5bd9e9f7ef41bda9993f96/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D256%26h%3D131%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09\" data-srcset=\"/_gatsby/image/07e483be156973f584758d8a3daa9cc8/a3c6e3e88f5bd9e9f7ef41bda9993f96/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D256%26h%3D131%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 256w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/6017ffdf6dbc6d97cf1774c79b59d522/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D512%26h%3D263%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 512w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/1ff7b2bd61d3378f78acfe4d75ef1d42/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D1024%26h%3D525%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 1024w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/e68c25da16e9b72bef0a28181515d1ac/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D2048%26h%3D1051%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 2048w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"6\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/07e483be156973f584758d8a3daa9cc8/a3c6e3e88f5bd9e9f7ef41bda9993f96/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D256%26h%3D131%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09\" srcSet=\"/_gatsby/image/07e483be156973f584758d8a3daa9cc8/a3c6e3e88f5bd9e9f7ef41bda9993f96/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D256%26h%3D131%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 256w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/6017ffdf6dbc6d97cf1774c79b59d522/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D512%26h%3D263%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 512w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/1ff7b2bd61d3378f78acfe4d75ef1d42/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D1024%26h%3D525%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 1024w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/e68c25da16e9b72bef0a28181515d1ac/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&amp;a=w%3D2048%26h%3D1051%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T07%3A11%3A09 2048w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"6\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/07e483be156973f584758d8a3daa9cc8/a3c6e3e88f5bd9e9f7ef41bda9993f96/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&a=w%3D256%26h%3D131%26fm%3Dpng%26q%3D90&cd=2019-12-16T07%3A11%3A09\",\"srcSet\":\"/_gatsby/image/07e483be156973f584758d8a3daa9cc8/a3c6e3e88f5bd9e9f7ef41bda9993f96/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&a=w%3D256%26h%3D131%26fm%3Dpng%26q%3D90&cd=2019-12-16T07%3A11%3A09 256w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/6017ffdf6dbc6d97cf1774c79b59d522/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&a=w%3D512%26h%3D263%26fm%3Dpng%26q%3D90&cd=2019-12-16T07%3A11%3A09 512w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/1ff7b2bd61d3378f78acfe4d75ef1d42/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&a=w%3D1024%26h%3D525%26fm%3Dpng%26q%3D90&cd=2019-12-16T07%3A11%3A09 1024w,/_gatsby/image/07e483be156973f584758d8a3daa9cc8/e68c25da16e9b72bef0a28181515d1ac/image-8.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-8.png&a=w%3D2048%26h%3D1051%26fm%3Dpng%26q%3D90&cd=2019-12-16T07%3A11%3A09 2048w\",\"sizes\":\"(min-width: 1024px) 1024px, 100vw\"}},\"layout\":\"constrained\",\"width\":1024,\"height\":525},\"alt\":\"\",\"className\":\"wp-image-2331 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"6\"}</script><figcaption> ロードバランサに外部IPアドレスを設定している所 </figcaption></figure>\n\n\n\n<p>対象のサービスに外部IPアドレスを指定して、アクセスできるようにします。slaveのnodeに記載されているIPアドレスに以下のXX部分を書き換えてmasterのnodeで実行します。（上記画像の例だと192.168.0.27となるようにします。）</p>\n\n\n\n<pre class=\"wp-block-preformatted\">kubectl patch svc my-nginx-svc -p '{\"spec\": {\"type\": \"LoadBalancer\", \"externalIPs\":[\"192.168.0.XX\"]}}'</pre>\n\n\n\n<p>確認として、以下のコマンドを実行して「my-nginx-svc」のEXTERNAL-IPに指定したIPアドレスが表示されていれば成功です。</p>\n\n\n\n<pre class=\"wp-block-preformatted\">kubectl get service</pre>\n\n\n\n<p>これでnginxアプリに接続できるはずなので、slaveのnodeからcurlコマンド（URLにアクセスするコマンド）を実行してみます。下記を指定したIPアドレスに変更して実行してください。するとHTMLがコンソールに出力されるはずです。</p>\n\n\n\n<pre class=\"wp-block-preformatted\">curl htttp://192.168.0.XX</pre>\n\n\n\n<figure class=\"wp-block-image size-large\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-2328 inline-gatsby-image-wrapper\"><div style=\"max-width:1024px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;796&#x27;%20width=&#x27;1024&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"7\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/48b78c0fd297825b521752f644dc08d7/85421c4bd334b73d1d619b4a0dc0bc49/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D256%26h%3D199%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13\" data-srcset=\"/_gatsby/image/48b78c0fd297825b521752f644dc08d7/85421c4bd334b73d1d619b4a0dc0bc49/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D256%26h%3D199%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 256w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/d3742df767ce1933ebfa409c68ff717e/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D512%26h%3D398%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 512w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/2c523c47bb978405bec3487d2834314d/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D1024%26h%3D796%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 1024w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/4a1fae4272f667173efcfcabc5f2ac40/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D2048%26h%3D1593%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 2048w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"7\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/48b78c0fd297825b521752f644dc08d7/85421c4bd334b73d1d619b4a0dc0bc49/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D256%26h%3D199%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13\" srcSet=\"/_gatsby/image/48b78c0fd297825b521752f644dc08d7/85421c4bd334b73d1d619b4a0dc0bc49/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D256%26h%3D199%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 256w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/d3742df767ce1933ebfa409c68ff717e/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D512%26h%3D398%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 512w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/2c523c47bb978405bec3487d2834314d/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D1024%26h%3D796%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 1024w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/4a1fae4272f667173efcfcabc5f2ac40/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&amp;a=w%3D2048%26h%3D1593%26fm%3Dpng%26q%3D90&amp;cd=2019-12-16T06%3A59%3A13 2048w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"7\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/48b78c0fd297825b521752f644dc08d7/85421c4bd334b73d1d619b4a0dc0bc49/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&a=w%3D256%26h%3D199%26fm%3Dpng%26q%3D90&cd=2019-12-16T06%3A59%3A13\",\"srcSet\":\"/_gatsby/image/48b78c0fd297825b521752f644dc08d7/85421c4bd334b73d1d619b4a0dc0bc49/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&a=w%3D256%26h%3D199%26fm%3Dpng%26q%3D90&cd=2019-12-16T06%3A59%3A13 256w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/d3742df767ce1933ebfa409c68ff717e/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&a=w%3D512%26h%3D398%26fm%3Dpng%26q%3D90&cd=2019-12-16T06%3A59%3A13 512w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/2c523c47bb978405bec3487d2834314d/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&a=w%3D1024%26h%3D796%26fm%3Dpng%26q%3D90&cd=2019-12-16T06%3A59%3A13 1024w,/_gatsby/image/48b78c0fd297825b521752f644dc08d7/4a1fae4272f667173efcfcabc5f2ac40/image-5.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage-5.png&a=w%3D2048%26h%3D1593%26fm%3Dpng%26q%3D90&cd=2019-12-16T06%3A59%3A13 2048w\",\"sizes\":\"(min-width: 1024px) 1024px, 100vw\"}},\"layout\":\"constrained\",\"width\":1024,\"height\":796},\"alt\":\"\",\"className\":\"wp-image-2328 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"7\"}</script><figcaption>nginxアプリがデフォルトのhtmlをレスポンスした状態。</figcaption></figure>\n\n\n\n<h3 class=\"wp-block-heading\">まとめ</h3>\n\n\n\n<p>一通り、最小限のk8sの構成方法について説明しました。masterセットアップ②まで実施してもらえれば、構築完了なので、種々のコマンドの実験や動作練習ができます。</p>\n\n\n\n<p>ブラウザだけでk8sを触れる大変便利な環境なので、皆さんもぜひとも活用してください。</p>\n\n\n\n<h3 class=\"wp-block-heading\">URL</h3>\n\n\n\n<figure class=\"wp-block-embed\"><div class=\"wp-block-embed__wrapper\">\nhttps://labs.play-with-k8s.com/\n</div></figure>\n\n\n","excerpt":"<p>kubernatis(以降k8sと表記)を試しに使ってみたい、触って慣れたとなった時に、普通ならローカル環境に構築してあれやこれやとやるのですが、それだと環境がグチャグチャになってわけが分からない状態になったりします。( [&hellip;]</p>\n","slug":"labs-play-with-k8s-com","date":"2019/12/17","featuredImage":{"node":{"altText":"","gatsbyImage":{"images":{"sources":[{"srcSet":"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/4a1cebf701b140dde5b6142c0f40b855/image.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D240%26h%3D242%26fm%3Davif%26q%3D75&cd=660899103ca322074591997e65107c8c 240w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/182dab04d92e244bc3f42727b92af626/image.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D480%26h%3D483%26fm%3Davif%26q%3D75&cd=660899103ca322074591997e65107c8c 480w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/7eb635a343e3ce4a34a6564b80fa44e3/image.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D960%26h%3D966%26fm%3Davif%26q%3D75&cd=660899103ca322074591997e65107c8c 960w","type":"image/avif","sizes":"(min-width: 960px) 960px, 100vw"},{"srcSet":"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/6035459ec887a76fb03e7d92f217461d/image.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D240%26h%3D242%26fm%3Dwebp%26q%3D75&cd=660899103ca322074591997e65107c8c 240w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/647f1f8940246f2b07911a1ba8cca3a6/image.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D480%26h%3D483%26fm%3Dwebp%26q%3D75&cd=660899103ca322074591997e65107c8c 480w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/3acae324aa248fd76130d2a6e38093e5/image.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D960%26h%3D966%26fm%3Dwebp%26q%3D75&cd=660899103ca322074591997e65107c8c 960w","type":"image/webp","sizes":"(min-width: 960px) 960px, 100vw"}],"fallback":{"src":"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/98d9560061bd759159ac5056ef3655ab/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D240%26h%3D242%26fm%3Dpng%26q%3D75&cd=660899103ca322074591997e65107c8c","srcSet":"/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/98d9560061bd759159ac5056ef3655ab/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D240%26h%3D242%26fm%3Dpng%26q%3D75&cd=660899103ca322074591997e65107c8c 240w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/330db0ba443de61be163b250d49abf50/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D480%26h%3D483%26fm%3Dpng%26q%3D75&cd=660899103ca322074591997e65107c8c 480w,/_gatsby/image/eeec04c24bc477501e0dadcdabb6cdfa/6b5c835347cfc55c9eb4f3096e168ff1/image.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F12%2Fimage.png&a=w%3D960%26h%3D966%26fm%3Dpng%26q%3D75&cd=660899103ca322074591997e65107c8c 960w","sizes":"(min-width: 960px) 960px, 100vw"}},"layout":"constrained","width":960,"height":966,"backgroundColor":"rgb(232,232,232)"}}},"categories":{"nodes":[{"name":"技術"}]},"tags":{"nodes":[{"name":"k8s"},{"name":"kubernates"}]}},"wpPrevious":{"title":"Raspberry piでseleniumがやっと動かせた","slug":"raspberry-pi-selenium"},"wpNext":{"title":"JJUG CCC 2019 Fall セッション資料まとめ","slug":"jjug-ccc-2019-fall"}},"pageContext":{"id":"cG9zdDoyMjcw","previousPostId":"cG9zdDoyMzM4","nextPostId":"cG9zdDoyMjgy","imagePath":null}},"staticQueryHashes":[],"slicesMap":{}}
{"componentChunkName":"component---src-templates-blog-post-js","path":"/ruby-on-rails-tutorial13/","result":{"data":{"site":{"siteMetadata":{"title":"分かりやすい技術ブログ"}},"allFile":{"edges":[]},"mdx":null,"mdPrevious":null,"mdNext":null,"wpPost":{"id":"cG9zdDoxODE0","title":"Ruby on Rails チュートリアルをやってみた【第13章】","content":"\n<h2 class=\"wp-block-heading\">第13章の実績</h2>\n\n\n\n<p><a href=\"https://railstutorial.jp/chapters/user_microposts?version=5.1#cha-user_microposts\">第13章 ユーザーのマイクロポスト</a> を実施しました！<br>実施時間: 4.5時間</p>\n\n\n\n<h3 class=\"wp-block-heading\">学べたこと</h3>\n\n\n\n<ul><li>モデルの関連付け<br>「rails generate model Micropost content:text user:references」とするだけで、&#8221;Micropost&#8221;と&#8221;User&#8221;のモデルが１対１の関係であることを関連づけられました。コード上では、Micropostクラスに&#8221;belongs_to :user&#8221;と表現されています。</li><li>1対多のモデルの関連付け<br>上記とは逆に、1対多の関係の関連付けは、「has_many」をモデルに記述することで表現します。ただしこれは上記と違ってコマンドで自動生成されないので手入力が必要なようです。</li><li> デフォルトスコープ <br>次の記述をすることで、DBからの取得時の標準の出力結果を指定できます「default_scope -&gt; { order(created_at: :desc) }」。この記述は、&#8221;<br>created_at&#8221;列を降順（descending）の順序（order）で取得することを表します。 </li><li>dependent: :destroy<br>この記述をすることで、依存しているモデルが削除された時に紐づくモデルも連なって削除されます。チュートリアルの例では「ユーザーが削除されたときに、そのユーザーに紐付いたマイクロポストも一緒に削除される」こととなります。</li><li></li><li>（おまけ）それっぽいテストデータを作ってくれるFakerというライブラリが面白い。何章か前からユーザ名や今章ではマイクロソフトの投稿のサンプルとして使っていますが、他にも色々な種類のテストデータがあります。 <a rel=\"noreferrer noopener\" href=\"https://github.com/stympy/faker\" target=\"_blank\">Fakerのドキュメント</a> (英語) を見ると、<a href=\"https://github.com/stympy/faker#japanese-media\">Japanese Media</a>にはDragonBallやOnePiece、SwordArtOnlineがあり、ドラゴンボールやワンピースは分かりますが、ソード・アート・オンラインが並ぶというのは中の人に好きな人でもいるのでしょうか？（笑）</li></ul>\n\n\n\n<h3 class=\"wp-block-heading\">独自にやったこと</h3>\n\n\n\n<h4 class=\"wp-block-heading\">ImageMagickインストール</h4>\n\n\n\n<p>Windowsについての導入手順が載っておらず、以下のURLリンクが貼ってあるのみでした。 <br><a href=\"http://www.imagemagick.org/script/download.php#windows\">http://www.imagemagick.org/script/download.php#windows</a> </p>\n\n\n\n<p>しかも、簡単には上手くいかず、上記を単純にインストールしただけだと、以下のように「Picture Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: ImageMagick/GraphicsMagick is not installed」というエラーが発生して画像のアップロードが上手くいきません。</p>\n\n\n\n<figure class=\"wp-block-image\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained wp-image-1832 inline-gatsby-image-wrapper\"><div style=\"max-width:1024px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;487&#x27;%20width=&#x27;1024&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/e5ffba7efbc0a2086884bffd45d73b45/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D256%26h%3D122%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50\" data-srcset=\"/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/e5ffba7efbc0a2086884bffd45d73b45/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D256%26h%3D122%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50 256w,/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/4b16a41023c051ad243e5a2fe9670d50/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D512%26h%3D244%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50 512w,/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/cfe0cdddfd47071d1ad83a17502e9cb2/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D1024%26h%3D487%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50 1024w\" alt=\"\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 1024px) 1024px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/e5ffba7efbc0a2086884bffd45d73b45/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D256%26h%3D122%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50\" srcSet=\"/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/e5ffba7efbc0a2086884bffd45d73b45/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D256%26h%3D122%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50 256w,/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/4b16a41023c051ad243e5a2fe9670d50/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D512%26h%3D244%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50 512w,/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/cfe0cdddfd47071d1ad83a17502e9cb2/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&amp;a=w%3D1024%26h%3D487%26fm%3Dpng%26q%3D90&amp;cd=2019-03-24T22%3A45%3A50 1024w\" alt=\"\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"1\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/e5ffba7efbc0a2086884bffd45d73b45/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&a=w%3D256%26h%3D122%26fm%3Dpng%26q%3D90&cd=2019-03-24T22%3A45%3A50\",\"srcSet\":\"/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/e5ffba7efbc0a2086884bffd45d73b45/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&a=w%3D256%26h%3D122%26fm%3Dpng%26q%3D90&cd=2019-03-24T22%3A45%3A50 256w,/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/4b16a41023c051ad243e5a2fe9670d50/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&a=w%3D512%26h%3D244%26fm%3Dpng%26q%3D90&cd=2019-03-24T22%3A45%3A50 512w,/_gatsby/image/10b5717b5bdb44c3cac9fefb720ed4c2/cfe0cdddfd47071d1ad83a17502e9cb2/image-13.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2019%2F03%2Fimage-13.png&a=w%3D1024%26h%3D487%26fm%3Dpng%26q%3D90&cd=2019-03-24T22%3A45%3A50 1024w\",\"sizes\":\"(min-width: 1024px) 1024px, 100vw\"}},\"layout\":\"constrained\",\"width\":1024,\"height\":487},\"alt\":\"\",\"className\":\"wp-image-1832 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"1\"}</script></figure>\n\n\n\n<p>けれど、先人で解決している人がおり、こちらの方法で上手くいきました。</p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-hatena-blog\"><div class=\"wp-block-embed__wrapper\">\n<iframe class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" title=\"【Windows】Ruby on Rails + Carrierwave + RMagickで画像のリサイズ - tomokiの備忘録\" src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftomokiit.hatenablog.jp%2Fentry%2Frails-curriewave-rmagick#?secret=Pqnisj12FR\" data-secret=\"Pqnisj12FR\" scrolling=\"no\" frameborder=\"0\"></iframe>\n</div></figure>\n\n\n\n<h2 class=\"wp-block-heading\">参考<br></h2>\n\n\n\n<h3 class=\"wp-block-heading\">環境</h3>\n\n\n\n<ul><li>ruby: 2.3.3</li><li>ruby on rails: 5.1.4</li><li>OS: Windows 10 (64bit)</li><li>IDE: IntelliJ ULTIMATE 2018.1</li><li>リポジトリ：GitHub</li></ul>\n\n\n\n<figure class=\"wp-block-embed\"><div class=\"wp-block-embed__wrapper\">\nhttps://github.com/nisioka/RubyOnRailsTutorial/tree/static-pages\n</div></figure>\n\n\n\n<h3 class=\"wp-block-heading\">リンク</h3>\n\n\n\n<ul><li> <a href=\"https://railstutorial.jp/chapters/user_microposts?version=5.1#cha-user_microposts\">第13章 ユーザーのマイクロポスト</a> </li><li><a href=\"http://tomokiit.hatenablog.jp/entry/rails-curriewave-rmagick\">http://tomokiit.hatenablog.jp/entry/rails-curriewave-rmagick</a></li></ul>\n\n\n\n<p>【スポンサードリンク】</p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"//af.moshimo.com/af/c/click?a_id=1184149&amp;p_id=1024&amp;pc_id=1450&amp;pl_id=15158&amp;guid=ON\" target=\"_blank\" rel=\"noreferrer noopener\"><img decoding=\"async\" src=\"//image.moshimo.com/af-img/0330/000000015158.jpg\" alt=\"\"/></a></figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"//af.moshimo.com/af/c/click?a_id=1124058&amp;p_id=936&amp;pc_id=1196&amp;pl_id=21425&amp;guid=ON\" target=\"_blank\" rel=\"noreferrer noopener\"><img decoding=\"async\" src=\"//image.moshimo.com/af-img/0288/000000021425.jpg\" alt=\"\"/></a></figure>\n","excerpt":"<p>第13章の実績 第13章 ユーザーのマイクロポスト を実施しました！実施時間: 4.5時間 学べたこと モデルの関連付け「rails generate model Micropost content:text user: [&hellip;]</p>\n","slug":"ruby-on-rails-tutorial13","date":"2019/03/25","featuredImage":{"node":{"altText":"","gatsbyImage":{"images":{"sources":[{"srcSet":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/46fba62b6562ba0bd521ccbb93ae069d/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 240w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/a9da388c6e12d233ba7aa2e5a298751f/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D480%26h%3D181%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 480w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/5a206004216c900bd35c696a2bdb08fd/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D960%26h%3D362%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 960w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/a84367d043cba502074a7fe5f197e972/Ruby_On_Rails_Logo.svg.avif?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D1920%26h%3D724%26fm%3Davif%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 1920w","type":"image/avif","sizes":"(min-width: 960px) 960px, 100vw"},{"srcSet":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/81bf8661cf4bdc30787fb97c3836412c/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 240w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/96824bb0e919780586b0c6d5071f28cf/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D480%26h%3D181%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 480w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/bd2a4d6df4236354cb7c1d30e0036935/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D960%26h%3D362%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 960w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/150cc819a29c76993cc3c0697b2d07b9/Ruby_On_Rails_Logo.svg.webp?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D1920%26h%3D724%26fm%3Dwebp%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 1920w","type":"image/webp","sizes":"(min-width: 960px) 960px, 100vw"}],"fallback":{"src":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/9c02974f0f35727dff574cbc2f69e599/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68","srcSet":"/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/9c02974f0f35727dff574cbc2f69e599/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D240%26h%3D90%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 240w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/1003265cd3927cf00b230acd3a619d57/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D480%26h%3D181%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 480w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/3557dce6001502f87d687ac5f889312f/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D960%26h%3D362%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 960w,/_gatsby/image/434fbbd67bd923da8351a4fb7740023a/059a4c3761b1c9b19eb1a22a998c179b/Ruby_On_Rails_Logo.svg.png?u=http%3A%2F%2Flocalhost%2Fwp-content%2Fuploads%2F2018%2F06%2FRuby_On_Rails_Logo.svg.png&a=w%3D1920%26h%3D724%26fm%3Dpng%26q%3D75&cd=832ddf78632f0efd3cf2249a0eed3b68 1920w","sizes":"(min-width: 960px) 960px, 100vw"}},"layout":"constrained","width":960,"height":362,"backgroundColor":"rgb(8,8,8)"}}}},"wpPrevious":{"title":"Ruby on Rails チュートリアルをやってみた【第14章】","slug":"ruby-on-rails-tutorial14"},"wpNext":{"title":"Ruby on Rails チュートリアルをやってみた【第12章】","slug":"ruby-on-rails-tutorial12"}},"pageContext":{"id":"cG9zdDoxODE0","previousPostId":"cG9zdDoxODM5","nextPostId":"cG9zdDoxODEx","imagePath":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}